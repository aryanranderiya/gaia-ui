---
title: Composer
description: A powerful chat input component with file uploads, slash commands, and tool integration for AI chat interfaces.
---

<ComponentPreview name="composer/default" />

## About

The Composer is a sophisticated chat input component inspired by modern AI chat interfaces. It features:

- Auto-resizing textarea that grows with content
- File upload with preview and management
- Slash command system for tool selection
- Loading states with stop functionality
- Keyboard shortcuts (Enter to send, Escape to clear)
- Fully customizable and accessible

Perfect for building chat interfaces, AI assistants, command palettes, or any interactive messaging system.

## Variants

### With File Upload

Upload and preview files before sending your message.

<ComponentPreview name="composer/with-files" />

### With Tools

Use slash commands to browse and select tools. Type `/` to see available tools.

<ComponentPreview name="composer/with-tools" />

### Loading State

Shows loading state with stop button during message generation.

<ComponentPreview name="composer/loading" />

## Installation

<Tabs defaultValue="automatic" className="mt-4">
  <TabsList>
    <TabsTrigger value="automatic">Automatic</TabsTrigger>
    <TabsTrigger value="manual">Manual</TabsTrigger>
  </TabsList>

{" "}
<TabsContent value="automatic">
  <InstallCommand component="composer" />
</TabsContent>

  <TabsContent value="manual">

Copy and paste the following code into your project.

<SourceCode filePath="registry/new-york/ui/composer.tsx" />

<SourceCode filePath="registry/new-york/ui/composer-input.tsx" />

<SourceCode filePath="registry/new-york/ui/composer-toolbar.tsx" />

Install required dependencies:

```bash
npx shadcn@latest add button
npm install lucide-react
```

  </TabsContent>
</Tabs>

## Usage

```tsx
import { useState } from "react";
import { Composer } from "@/components/ui/composer";

export default function ChatInterface() {
  const [message, setMessage] = useState("");

  const handleSubmit = (text: string) => {
    console.log("Message:", text);
    // Send message to your API
  };

  return (
    <Composer
      value={message}
      onValueChange={setMessage}
      onSubmit={handleSubmit}
      placeholder="Type your message..."
    />
  );
}
```

## Props

### Composer

| Prop           | Type                                             | Default                        | Description                              |
| -------------- | ------------------------------------------------ | ------------------------------ | ---------------------------------------- |
| value          | string                                           | ""                             | Current input text value                 |
| onValueChange  | (value: string) => void                          | -                              | Callback when input text changes         |
| onSubmit       | (message: string, files?: FilePreview[]) => void | -                              | Callback when user submits message       |
| placeholder    | string                                           | "What can I do for you today?" | Placeholder text for the input           |
| isLoading      | boolean                                          | false                          | Whether the composer is in loading state |
| onStop         | () => void                                       | -                              | Callback to stop loading/generation      |
| disabled       | boolean                                          | false                          | Whether the composer is disabled         |
| className      | string                                           | -                              | Additional CSS classes                   |
| files          | FilePreview[]                                    | []                             | Uploaded files                           |
| onFilesChange  | (files: FilePreview[]) => void                   | -                              | Callback when files are added/removed    |
| maxFiles       | number                                           | 10                             | Maximum number of files allowed          |
| showFileUpload | boolean                                          | true                           | Whether to show the file upload button   |
| showTools      | boolean                                          | true                           | Whether to show the tools button         |
| tools          | Tool[]                                           | []                             | Available tools for slash commands       |
| onToolSelect   | (toolName: string, toolCategory: string) => void | -                              | Callback when a tool is selected         |
| selectedTool   | string \| null                                   | null                           | Currently selected tool                  |
| onRemoveTool   | () => void                                       | -                              | Callback to remove selected tool         |

### Tool Interface

```tsx
interface Tool {
  name: string;
  category: string;
  description?: string;
  icon?: React.ReactNode;
}
```

### FilePreview Interface

```tsx
interface FilePreview {
  id: string;
  name: string;
  type: string;
  url?: string;
  size?: number;
  isUploading?: boolean;
}
```

## Examples

### Basic Chat

Simple chat interface with message submission.

```tsx
"use client";

import { useState } from "react";
import { Composer } from "@/components/ui/composer";

export default function BasicChat() {
  const [message, setMessage] = useState("");

  const handleSubmit = (text: string) => {
    console.log("Sending:", text);
    // Send to your API
  };

  return (
    <div className="max-w-3xl mx-auto p-4">
      <Composer
        value={message}
        onValueChange={setMessage}
        onSubmit={handleSubmit}
      />
    </div>
  );
}
```

### With File Uploads

Handle file uploads with preview.

```tsx
"use client";

import { useState } from "react";
import { Composer, FilePreview } from "@/components/ui/composer";

export default function ChatWithFiles() {
  const [message, setMessage] = useState("");
  const [files, setFiles] = useState<FilePreview[]>([]);

  const handleSubmit = async (text: string, uploadedFiles?: FilePreview[]) => {
    // Upload files to your API
    const fileUrls = uploadedFiles?.map((f) => f.url) || [];

    // Send message with file references
    await fetch("/api/chat", {
      method: "POST",
      body: JSON.stringify({
        message: text,
        files: fileUrls,
      }),
    });
  };

  return (
    <Composer
      value={message}
      onValueChange={setMessage}
      onSubmit={handleSubmit}
      files={files}
      onFilesChange={setFiles}
      maxFiles={5}
    />
  );
}
```

### With Slash Commands

Add tool selection via slash commands.

```tsx
"use client";

import { useState } from "react";
import { Code, Search, FileText } from "lucide-react";
import { Composer } from "@/components/ui/composer";

const tools = [
  {
    name: "web_search",
    category: "Search",
    description: "Search the web",
    icon: <Search className="h-4 w-4" />,
  },
  {
    name: "code_review",
    category: "Development",
    description: "Review code",
    icon: <Code className="h-4 w-4" />,
  },
  {
    name: "summarize",
    category: "Writing",
    description: "Summarize text",
    icon: <FileText className="h-4 w-4" />,
  },
];

export default function ChatWithTools() {
  const [message, setMessage] = useState("");
  const [selectedTool, setSelectedTool] = useState<string | null>(null);

  const handleSubmit = (text: string) => {
    console.log("Message:", text, "Tool:", selectedTool);
    // Send with tool context
  };

  return (
    <Composer
      value={message}
      onValueChange={setMessage}
      onSubmit={handleSubmit}
      tools={tools}
      onToolSelect={(name) => setSelectedTool(name)}
      selectedTool={selectedTool}
      onRemoveTool={() => setSelectedTool(null)}
    />
  );
}
```

### With Loading State

Handle message generation with loading states.

```tsx
"use client";

import { useState } from "react";
import { Composer } from "@/components/ui/composer";

export default function ChatWithLoading() {
  const [message, setMessage] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [abortController, setAbortController] =
    useState<AbortController | null>(null);

  const handleSubmit = async (text: string) => {
    setIsLoading(true);
    const controller = new AbortController();
    setAbortController(controller);

    try {
      // Stream response from API
      const response = await fetch("/api/chat", {
        method: "POST",
        body: JSON.stringify({ message: text }),
        signal: controller.signal,
      });

      // Handle streaming response
      const reader = response.body?.getReader();
      // Process stream...
    } catch (error) {
      if (error.name === "AbortError") {
        console.log("Generation stopped");
      }
    } finally {
      setIsLoading(false);
      setAbortController(null);
    }
  };

  const handleStop = () => {
    abortController?.abort();
  };

  return (
    <Composer
      value={message}
      onValueChange={setMessage}
      onSubmit={handleSubmit}
      isLoading={isLoading}
      onStop={handleStop}
    />
  );
}
```

### Full-Featured Chat

Combine all features for a complete chat interface.

```tsx
"use client";

import { useState } from "react";
import { Composer, FilePreview } from "@/components/ui/composer";

export default function FullFeaturedChat() {
  const [message, setMessage] = useState("");
  const [files, setFiles] = useState<FilePreview[]>([]);
  const [selectedTool, setSelectedTool] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(false);

  const tools = [
    // Your tools here...
  ];

  const handleSubmit = async (text: string, uploadedFiles?: FilePreview[]) => {
    setIsLoading(true);
    try {
      await fetch("/api/chat", {
        method: "POST",
        body: JSON.stringify({
          message: text,
          files: uploadedFiles,
          tool: selectedTool,
        }),
      });
    } finally {
      setIsLoading(false);
      setSelectedTool(null);
    }
  };

  return (
    <div className="max-w-4xl mx-auto p-4">
      <Composer
        value={message}
        onValueChange={setMessage}
        onSubmit={handleSubmit}
        files={files}
        onFilesChange={setFiles}
        tools={tools}
        onToolSelect={(name) => setSelectedTool(name)}
        selectedTool={selectedTool}
        onRemoveTool={() => setSelectedTool(null)}
        isLoading={isLoading}
        onStop={() => setIsLoading(false)}
        placeholder="Ask me anything..."
      />
    </div>
  );
}
```

## Keyboard Shortcuts

| Shortcut      | Action                       |
| ------------- | ---------------------------- |
| Enter         | Submit message               |
| Shift + Enter | New line                     |
| /             | Open slash command dropdown  |
| ↑ / ↓         | Navigate tools               |
| Escape        | Close dropdown or clear tool |
| Tab           | Select tool                  |

## Accessibility

The Composer component is built with accessibility in mind:

- **Keyboard Navigation**: Full keyboard support for all interactions
- **ARIA Labels**: Proper ARIA labels for screen readers
- **Focus Management**: Logical focus order and visible focus indicators
- **Semantic HTML**: Uses proper HTML elements (textarea, button, form)
- **Color Contrast**: Meets WCAG AA standards for text contrast

## Styling

The component uses Tailwind CSS and can be customized via the `className` prop:

```tsx
<Composer
  className="custom-composer"
  value={message}
  onValueChange={setMessage}
  onSubmit={handleSubmit}
/>
```

You can also customize the colors by modifying your Tailwind config or overriding the component's CSS classes.

## Tips

- **Auto-resize**: The textarea automatically grows as you type (up to max height)
- **File Limits**: Set `maxFiles` to control upload limits
- **Tool Discovery**: Users can type `/` to discover available tools
- **Loading States**: Always provide an `onStop` callback when using `isLoading`
- **Validation**: Validate message content in your `onSubmit` handler
- **File Handling**: Handle file uploads on your backend before passing URLs to the component

## Related Components

- [Button](/docs/components/button) - Used for actions in the toolbar
- [Textarea](/docs/components/textarea) - Base input component
